#!/usr/bin/env bash
# This script configures /etc/hosts to redirect localhost and facebook.com

# Change localhost from 127.0.0.1 to 127.0.0.2
# We use a method that works even if /etc/hosts is a mounted resource
sed 's/127.0.0.1/127.0.0.2/' /etc/hosts | sudo tee /etc/hosts > /dev/null

# Append facebook.com resolution if it doesn't already exist
# Or replace it if it does
if grep -q "facebook.com" /etc/hosts; then
    sed 's/.*facebook.com/8.8.8.8 facebook.com/' /etc/hosts | sudo tee /etc/hosts > /dev/null
else
    echo "8.8.8.8 facebook.com" | sudo tee -a /etc/hosts > /dev/null
fi
